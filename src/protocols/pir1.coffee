module.exports = (helper) ->
  pulsesToBinaryMapping = {
    '01': '0' #binary 0
    '02': '1' #binary 1
    '03': ''  #footer
  }
  return protocolInfo = {
    name: 'pir1'
    type: 'pir'
    values:
      presence:
        type: "boolean"
    models: []
    pulseLengths: [413, 668, 1644, 16936]
    pulseCount: 50
    decodePulses: (pulses) ->
      # pulses is something like: '02210221022102020221022102210221022102210221020203'
      # we first map: 01 => 0, 02 => 1, 03 => nothing
      # Event detected ...
      # RF receive 416 1640 662 16956 0 0 0 0 01120112011201010112011201120112011201120112010103
      # RF receive 433 1654 656 17008 0 0 0 0 01120112011201010112011201120112011201120112010103
      # RF receive 435 1653 652 17004 0 0 0 0 01120112011201010112011201120112011201120112010103
      # RF receive 435 1653 654 17004 0 0 0 0 01120112011201010112011201120112011201120112010103
      # RF receive 438 1653 650 17012 0 0 0 0 01120112011201010112011201120112011201120112010103
      # RF receive 434 1653 656 17000 0 0 0 0 01120112011201010112011201120112011201120112010103
      # RF receive 433 1653 656 17000 0 0 0 0 01120112011201010112011201120112011201120112010103
      # RF receive 434 1653 654 17028 0 0 0 0 01120112011201010112011201120112011201120112010103
      # RF receive 433 1653 657 17008 0 0 0 0 01120112011201010112011201120112011201120112010103
      # RF receive 431 1654 657 17000 0 0 0 0 01120112011201010112011201120112011201120112010103
      # RF receive 434 1654 654 17012 0 0 0 0 01120112011201010112011201120112011201120112010103
      # RF receive 430 1654 657 17008 0 0 0 0 01120112011201010112011201120112011201120112010103
      # RF receive 434 1653 656 17016 0 0 0 0 01120112011201010112011201120112011201120112010103
      # RF receive 433 1653 659 17016 0 0 0 0 01120112011201010112011201120112011201120112010103
      # RF receive 435 1653 654 17024 0 0 0 0 01120112011201010112011201120112011201120112010103
      # RF receive 435 1653 654 17000 0 0 0 0 01120112011201010112011201120112011201120112010103
      # RF receive 431 1654 658 17004 0 0 0 0 01120112011201010112011201120112011201120112010103
      # RF receive 418 1654 670 17004 0 0 0 0 01120112011201010112011201120112011201120112010103
      # RF receive 390 1651 693 16924 0 0 0 0 01120112011201010112011201120112011201120112010103
      # RF receive 412 1622 651 16580 0 0 0 0 01120112011201010112011201120112011201120112010103
      # Event ended ...
      # RF receive 501 1552 15876 0 0 0 0 0 01100110011001010110011001100110011001100110010102
      # RF receive 468 1430 13804 0 0 0 0 0 01100110011001010110011001100110011001100110010102
      # RF receive 661 1987 22400 0 0 0 0 0 01100110011001010110011001100110011001100110010102

      binary = helper.map(pulses, pulsesToBinaryMapping)
      #console.log binary
      # binary is now something like: '000111101000000011101010111100000000'
      return result = {
        presence: true
      }
  }
